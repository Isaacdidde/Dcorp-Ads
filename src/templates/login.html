<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin Login</title>

    <!-- Bootstrap -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
    />

    <style>
        body {
            background: #f1f3f5;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .login-card {
            width: 100%;
            max-width: 420px;
        }
    
.flash-message {
    padding: 12px 18px;
    border-radius: 8px;
    margin-bottom: 12px;
    font-weight: 600;
    display: block;
    font-size: 15px;
}

/* SUCCESS */
.flash-success {
    background: #d1fae5;
    color: #065f46;
    border-left: 5px solid #10b981;
}

/* ERROR */
.flash-error {
    background: #fee2e2;
    color: #b91c1c;
    border-left: 5px solid #ef4444;
}

/* WARNING */
.flash-warning {
    background: #fef3c7;
    color: #92400e;
    border-left: 5px solid #f59e0b;
}
</style>

</head>

<body>

    <div class="card shadow-sm login-card">
        <div class="card-body p-4">

            <h3 class="text-center fw-bold mb-3">Admin Login</h3>
            <p class="text-center text-muted mb-4">Access your dashboard</p>

            <!-- FIXED FLASH MESSAGES (only one render!) -->
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="flash-message flash-{{ category }}">
                    {{ message }}
                  </div>
                {% endfor %}
              {% endif %}
            {% endwith %}

            <!-- Login Form -->
            <form method="POST" action="/admin/login">
                <div class="mb-3">
                    <label class="form-label fw-semibold">Email</label>
                    <input
                        type="email"
                        name="email"
                        class="form-control"
                        placeholder="admin@example.com"
                        required
                    />
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Password</label>
                    <input
                        type="password"
                        name="password"
                        class="form-control"
                        placeholder="••••••••"
                        required
                    />
                </div>

                <button type="submit" class="btn btn-dark w-100 mt-2">
                    Login
                </button>
            </form>

        </div>
    </div>

    <!-- Bootstrap JS -->
    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    ></script>

</body>
</html>
